(()=>{"use strict";var e={3189:(e,t,n)=>{n(6992),n(8674),n(9601),n(7727);var r=n(9242),o=n(3396),i=(0,o.Uk)("Home"),a=(0,o.Uk)(" | "),l=(0,o.Uk)("About");function s(e,t){var n=(0,o.up)("router-link"),r=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",null,[(0,o.Wm)(n,{to:"/"},{default:(0,o.w5)((function(){return[i]})),_:1}),a,(0,o.Wm)(n,{to:"/about"},{default:(0,o.w5)((function(){return[l]})),_:1})]),(0,o.Wm)(r)],64)}var c=n(89);const u={},d=(0,c.Z)(u,[["render",s]]),v=d;n(1539),n(8783),n(3948);var p=n(302),f=n(8534),m=(n(6133),n(6977),n(4916),n(7601),n(4870)),h=n(5461);new h.XS;var g=n(1114),w=n(2236),b=new g.xsS,_=new w.x;_.loadAsync("./textures/023.hdr").then((function(e){b.background=e,b.environment=e,b.environment.mapping=g.dSO}));var y=new g.Ox3(16777215,1);y.position.set(10,100,10),b.add(y);const C=b;var k=n(3087),P=n(2833),x=n(1373),O=new x.Z;const j=O;var A=new g.cPb(75,window.innerHeight/window.innerHeight,1,1e5);A.position.set(1e3,1e3,1e3);var E=function(){function e(){var t=this;(0,k.Z)(this,e),this.activeCamera=A,this.collection={default:A},j.on("toggleCamera",(function(e){t.setActive(e)}))}return(0,P.Z)(e,[{key:"add",value:function(e,t){this.collection[e]=t}},{key:"setActive",value:function(e){this.activeCamera=this.collection[e]}}]),e}();const S=new E;var F=n(4543),M=n(1183),Z=n(1984),H=new g.CP7({antialias:!0,logarithmicDepthBuffer:!0,physicallyCorrectLights:!0});H.setSize(window.innerWidth,window.innerHeight),H.shadowMap.enabled=!0,H.toneMapping=g.LY2,H.toneMappingExposure=1.5;const D=H;var L=function(){function e(){var t=this;(0,k.Z)(this,e),this.setOrbitControls(),j.on("toggleControls",(function(e){t["set".concat(e,"Controls")]()}))}return(0,P.Z)(e,[{key:"setOrbitControls",value:function(){this.controls=new F.z(S.activeCamera,D.domElement),this.controls.enableDamping=!0,this.controls.maxPolarAngle=Math.PI/2,this.controls.minPolarAngle=0}},{key:"setFlyControls",value:function(){this.controls=new M.m(S.activeCamera,D.domElement),this.controls.movementSpeed=100,this.controls.rollSpeed=Math.PI/60}},{key:"setFirstPersonControls",value:function(){this.controls=new Z.o(S.activeCamera,D.domElement),this.controls.movementSpeed=100,this.controls.rollSpeed=Math.PI/60}}]),e}();const T=new L;var W=new g.y8_(5);const N=W;S.activeCamera.aspect=window.innerWidth/window.innerHeight,S.activeCamera.updateProjectionMatrix(),window.addEventListener("resize",(function(){S.activeCamera.aspect=window.innerWidth/window.innerHeight,S.activeCamera.updateProjectionMatrix(),D.setSize(window.innerWidth,window.innerHeight),D.setPixelRatio(window.devicePixelRatio)}));var Y,z=n(4198),B=(n(8309),n(9554),n(4747),n(8552)),I=n(1989),R=function(){function e(t){var n=this;(0,k.Z)(this,e),this.scene=t,this.loader=new z.E;var r=new I._;r.setDecoderPath("./draco/"),this.loader.setDRACOLoader(r),this.loader.load("./model/city4.glb",(function(e){console.log(e),t.add(e.scene),n.gltf=e,e.scene.traverse((function(t){if("热气球"===t.name&&(n.mixer=new g.Xcj(t),n.clip=e.animations[1],n.action=n.mixer.clipAction(n.clip),n.action.play()),"汽车园区轨迹"===t.name){var r=t;r.visible=!1;for(var o=[],i=r.geometry.attributes.position.count-1;i>=0;i--)o.push(new g.Pa4(r.geometry.attributes.position.getX(i),r.geometry.attributes.position.getY(i),r.geometry.attributes.position.getZ(i)));n.curve=new g.YT8(o),n.curveProgress=0,n.carAnimation()}"redcar"===t.name&&(console.log(t),n.redcar=t)})),e.cameras.forEach((function(e){S.add(e.name,e)}))})),j.on("actionClick",(function(e){console.log(e),n.action.reset(),n.clip=n.gltf.animations[e],console.log(n.clip,"  this.clip ="),n.action=n.mixer.clipAction(n.clip),n.action.play()}))}return(0,P.Z)(e,[{key:"update",value:function(e){this.mixer&&this.mixer.update(e)}},{key:"carAnimation",value:function(){var e=this;B.ZP.to(this,{curveProgress:.999,duration:10,repeat:-1,onUpdate:function(){var t=e.curve.getPoint(e.curveProgress);if(e.redcar.position.set(t.x,t.y,t.z),e.curveProgress+.001<1){var n=e.curve.getPoint(e.curveProgress+.001);e.redcar.lookAt(n)}}})}}]),e}();function U(){Y=new R(C)}function q(e){Y.update(e)}var X=new g.SUY;function G(e){var t=X.getDelta();T.controls.update(t),q(t),requestAnimationFrame(G),D.render(C,S.activeCamera)}const J=G,K={props:["eventList"],setup:function(e){var t=(0,m.iH)(null);C.add(S.activeCamera),C.add(N),U();return(0,o.bv)((function(){t.value.appendChild(D.domElement),J()})),function(e,n){return(0,o.wg)(),(0,o.iD)("div",{class:"scene",ref_key:"sceneDiv",ref:t},null,512)}}},Q=K,V=Q;var $={id:"bigScreen"},ee=(0,o._)("div",{class:"header"},"智慧园区",-1),te={class:"main"},ne={class:"left"},re={class:"cityEvent"},oe=(0,o._)("h3",null,[(0,o._)("span",null,"热气球控制")],-1),ie=(0,o._)("span",null,"1.设置热气球以横穿园区的动画显示",-1),ae=[ie],le=(0,o._)("span",null,"2.设置热气球以环绕园区进行运动",-1),se=[le],ce=(0,o._)("div",{class:"footerBorder"},null,-1),ue={class:"cityEvent"},de=(0,o._)("h3",null,[(0,o._)("span",null,"相机控制")],-1),ve=(0,o._)("span",null,"1.默认的相机视角",-1),pe=[ve],fe=(0,o._)("span",null,"2.设置相机追随汽车导览园区",-1),me=[fe],he=(0,o._)("span",null,"3.查看汽车司机视角",-1),ge=[he],we=(0,o._)("div",{class:"footerBorder"},null,-1),be={class:"right"},_e={class:"cityEvent list"},ye=(0,o._)("h3",null,[(0,o._)("span",null,"切换园区观览模式")],-1),Ce=(0,o._)("h1",null,[(0,o._)("div",null,[(0,o._)("span",null," 1.轨道观览 ")])],-1),ke=(0,o._)("p",null,"可以锁定目标建筑和园区进行轨道式360°查看",-1),Pe=[Ce,ke],xe=(0,o._)("h1",null,[(0,o._)("div",null,[(0,o._)("span",null," 2.飞行观览 ")])],-1),Oe=(0,o._)("p",null,"可以使用飞行模式进行园区进行观览",-1),je=[xe,Oe],Ae=(0,o._)("h1",null,[(0,o._)("div",null,[(0,o._)("span",null," 3.第一人称 ")])],-1),Ee=(0,o._)("p",null,"可以使用第一人称模式进行园区进行观览",-1),Se=[Ae,Ee],Fe=(0,o._)("div",{class:"footerBorder"},null,-1);const Me={props:["dataInfo","dataInfoNum","iotNum","eventNum","testNum","powerNum","eventList"],setup:function(e){var t=(0,m.iH)(null);n(3886),n(8957),n(8169);j.on("spriteClick",(function(e){t.value=e}));var r=function(e){console.log(e),j.emit("actionClick",e)},i=function(e){j.emit("toggleCamera",e)},a=function(e){j.emit("toggleControls",e)};return function(e,t){return(0,o.wg)(),(0,o.iD)("div",$,[ee,(0,o._)("div",te,[(0,o._)("div",ne,[(0,o._)("div",re,[oe,(0,o._)("h1",{onClick:t[0]||(t[0]=function(e){return r(0)})},ae),(0,o._)("h1",{onClick:t[1]||(t[1]=function(e){return r(1)})},se),ce]),(0,o._)("div",ue,[de,(0,o._)("h1",{onClick:t[2]||(t[2]=function(e){return i("default")})},pe),(0,o._)("h1",{onClick:t[3]||(t[3]=function(e){return i("carcamera_Orientation")})},me),(0,o._)("h1",{onClick:t[4]||(t[4]=function(e){return i("rightcamera_Orientation")})},ge),we])]),(0,o._)("div",be,[(0,o._)("div",_e,[ye,(0,o._)("ul",null,[(0,o._)("li",{onClick:t[5]||(t[5]=function(e){return a("Orbit")})},Pe),(0,o._)("li",{onClick:t[6]||(t[6]=function(e){return a("Fly")})},je),(0,o._)("li",{onClick:t[7]||(t[7]=function(e){return a("FirstPerson")})},Se)]),Fe])])])])}}},Ze=Me,He=Ze;n(6265);var De={class:"home"};const Le={setup:function(e){var t=(0,m.qj)({}),n=(0,m.qj)({iot:0,event:0,power:0,test:0});(0,o.Fl)((function(){return n.iot.toFixed(0)})),(0,o.Fl)((function(){return n.event.toFixed(0)})),(0,o.Fl)((function(){return n.power.toFixed(2)})),(0,o.Fl)((function(){return n.test.toFixed(0)}));(0,o.bv)((0,f.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),(0,o.YP)(t,(function(e,t){B.ZP.to(n,{iot:e.iot.number,event:e.event.number,test:e.test.number,power:e.power.number,duration:1,repeat:1})}));var r=(0,m.iH)([]);return(0,o.YP)(r,(function(){console.log("触发事件列表更新")})),(0,o.bv)((function(){})),function(e,t){return(0,o.wg)(),(0,o.iD)("div",De,[(0,o.Wm)(V,{eventList:r.value},null,8,["eventList"]),(0,o.Wm)(He)])}}},Te=Le,We=Te;var Ne=[{path:"/",name:"home",component:We},{path:"/about",name:"about",component:function(){return n.e(443).then(n.bind(n,7381))}}],Ye=(0,p.p7)({history:(0,p.r5)(),routes:Ne});const ze=Ye;var Be=n(65);const Ie=(0,Be.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,r.ri)(v).use(Ie).use(ze).mount("#app")},3886:(e,t,n)=>{e.exports=n.p+"img/dianli.00c36544.svg"},8957:(e,t,n)=>{e.exports=n.p+"img/fire.5236bece.svg"},8169:(e,t,n)=>{e.exports=n.p+"img/jingcha.da78e053.svg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,n),i.loaded=!0,i.exports}n.m=e,(()=>{var e=[];n.O=(t,r,o,i)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,o,i]=e[u],l=!0,s=0;s<r.length;s++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](r[s])))?r.splice(s--,1):(l=!1,i<a&&(a=i));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]}})(),(()=>{n.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return n.d(t,{a:t}),t}})(),(()=>{n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}})(),(()=>{n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[]))})(),(()=>{n.u=e=>"js/about.78b54b96.js"})(),(()=>{n.miniCssF=e=>{}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="threeapp:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var l,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+i),l.src=r),e[r]=[o];var v=(t,n)=>{l.onerror=l.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((e=>e(n))),t)return t(n)},p=setTimeout(v.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=v.bind(null,l.onerror),l.onload=v.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),(()=>{n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{n.p="/"})(),(()=>{var e={143:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var a=n.p+n.u(t),l=new Error,s=r=>{if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,o[1](l)}};n.l(a,s,"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[a,l,s]=r,c=0;if(a.some((t=>0!==e[t]))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var u=s(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},r=self["webpackChunkthreeapp"]=self["webpackChunkthreeapp"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[998],(()=>n(3189)));r=n.O(r)})();
//# sourceMappingURL=app.6a610e67.js.map